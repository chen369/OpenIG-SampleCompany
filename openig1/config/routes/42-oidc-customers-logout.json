{
  "baseURI": "http://customers.example.com:8004/customerApp",
  "handler": {
    "comment": "OpenAM Logout Handler",
    "name": "OpenAM Logout Handler",
    "type": "Chain",
    "config": {
      "filters": [
        {
          "comment": "OpenAM Logout Switch",
          "name": "OpenAM Logout Switch",
          "type": "SwitchFilter",
          "config": {
            "onRequest": [
              {
                "condition": "${contains(request.uri.path, 'logout.html')}",
                "handler": {
                  "comment": "(Optional) OpenAM Logout",
                  "name": "OpenAM Logout Chain",
                  "type": "Chain",
                  "config": {
                    "filters": [
                      {
                        "comment": "Scripted filter for OpenAM Logout",
                        "name": "OpenAM Logout",
                        "type": "ScriptableFilter",
                        "config": {
                          "type": "application/x-groovy",
                          "file": "OpenAMLogout.groovy",
                          "args": {
                            "openamUrl": "http://openam.example.com:18080/openam/json/customers"
                          }
                        },
                        "capture": "all"
                      }
                    ],
                    "handler": "ClientHandler"
                  }
                }
              }
            ]
          },
          "capture": "all"
        }
      ],
      "handler": "ClientHandler"
    }
  },
  "condition": "${matches(request.uri.path, '^/customerApp') and (contains(request.uri.path, 'logout.html'))}"
}